{% extends "base.html" %}
{% block title %} Schedule Task {% endblock %}
{% block content %}
<article>
  <h1>Schedule a New Task</h1>
  <form action="" method="post">
    {% csrf_token %}
    <label for="endpoint">Endpoint:</label>
    <input type="text" id="endpoint" name="endpoint" required /><br /><br />
    <label for="interval">Interval:</label>
    <select id="interval" name="interval">
      {% for key, value in interval_choices %}
      <option value="{{ key }}">{{ value }}</option>
      {% endfor %}
    </select><br /><br />
    <button type="submit">Schedule Task</button>
  </form>
</article>

<h2>Current Scheduled Tasks</h2>
{% if tasks %}
<ul>
  {% for task in tasks %}
  <li>
    {{ task.endpoint }}: Every {{ task.get_interval_display }} - Last run: {{ task.last_run }}
  </li>
  {% endfor %}
</ul>
{% else %}
<p>No tasks scheduled.</p>
{% endif %}
{% endblock %}
